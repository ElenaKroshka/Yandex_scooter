# Дипломный проект
## _Практический блок: вторая часть_
**Проект выполнила Елена Крошка, 13-я когорта - Venus** 

## Работа с базой данных
**Задание 1.** 
Представь: тебе нужно проверить, отображается ли созданный заказ в базе данных.
Для этого: выведи список логинов курьеров с количеством их заказов в статусе «В доставке» (поле inDelivery = true). 

_Решение:_  
```sh
SELECT cor.login, 
      COUNT (ord.track) AS "Count_orders_inDelivery" 
FROM "Couriers" AS cor 
INNER JOIN "Orders" AS ord ON cor.id = ord."courierId" 
WHERE ord."inDelivery" = true 
GROUP BY cor.login;
```
_Результат запроса на скриншотах request_1_1, request_1_2_ 

**Задание 2.** 
Ты тестируешь статусы заказов. Нужно убедиться, что в базе данных они записываются корректно.
Для этого: выведи все трекеры заказов и их статусы. 

Статусы определяются по следующему правилу:
- Если поле finished == true, то вывести статус 2.
- Если поле canсelled == true, то вывести статус -1.
- Если поле inDelivery == true, то вывести статус 1.
- Для остальных случаев вывести 0.

_Решение:_  
```sh
SELECT track, 
           CASE 
        WHEN finished = true THEN 2 
        WHEN cancelled = true THEN -1 
        WHEN "inDelivery" = true THEN 1 
            ELSE 0 END AS "Orders_status" 
  FROM "Orders";
```
_Результат запроса на скриншотах request_2_1, request_2_2_ 

_Запросы в текстовом формате находятся в файле requests.txt_ 


## Автоматизация теста к API
Теперь автоматизируй сценарий, который подготовили коллеги-тестировщики:
1. Клиент создает заказ.
2. Проверяется, что по треку заказа можно получить данные о заказе.

Шаги автотеста:
1. Выполнить запрос на создание заказа.
2. Сохранить номер трека заказа.
3. Выполнить запрос на получения заказа по треку заказа.
4. Проверить, что код ответа равен 200.

**Файлы проекта:** 
- configuration.py - URL и пути запросов
- data.py - Тела POST-запроса на создание заказа и headers
- sender_stand_request.py - Отправка запросов
- check_order_test - Автотест

**Для запуска автотеста необходимо:** 
- Установить библиотеки Pytest и requests в PyCharm 
- В файл configuration.py скопировать URL стенда Яндекс Самокат
- Запустить автотест с помощью команды:  
```sh
pytest check_order_test.py
```
- или запустить автотест нажав Run файле check_order_test

_Результат выполнения автотеста на скриншоте result_test.py_ 


